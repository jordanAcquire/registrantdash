<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pre-Event Registrant Summary | AcquireUp</title>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Fraunces:wght@600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #0a1628;
            --bg-card: #0f2039;
            --bg-card-alt: #162a4a;
            --bg-modal: #0d1a2d;
            --accent-neon: #00e5cc;
            --accent-neon-dim: rgba(0, 229, 204, 0.15);
            --accent-cream: #f5f0e6;
            --accent-gold: #c9a227;
            --accent-gold-dim: rgba(201, 162, 39, 0.15);
            --accent-blue: #3b82f6;
            --accent-purple: #a855f7;
            --accent-red: #ef4444;
            --text-primary: #f5f0e6;
            --text-secondary: #a8b5c4;
            --text-muted: #6b7a8a;
            --border: rgba(0, 229, 204, 0.12);
            --tier1: #00e5cc;
            --tier2: #c9a227;
            --tier3: #3b82f6;
        }

        [data-theme="light"] {
            --bg-primary: #f8fafc;
            --bg-card: #ffffff;
            --bg-card-alt: #f1f5f9;
            --bg-modal: #ffffff;
            --accent-neon: #0d9488;
            --accent-neon-dim: rgba(13, 148, 136, 0.15);
            --text-primary: #1e293b;
            --text-secondary: #475569;
            --text-muted: #94a3b8;
            --border: rgba(13, 148, 136, 0.2);
            --tier1: #0d9488;
            --tier2: #b45309;
            --tier3: #2563eb;
        }

        body {
            font-family: 'DM Sans', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            padding: 40px;
            padding-top: 80px;
            transition: background 0.3s, color 0.3s;
        }

        [data-theme="dark"] body {
            background-image: 
                radial-gradient(ellipse 80% 50% at 50% -20%, rgba(0, 229, 204, 0.1), transparent),
                radial-gradient(ellipse 60% 40% at 100% 100%, rgba(201, 162, 39, 0.05), transparent);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        /* Demo Banner */
        .demo-banner {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: linear-gradient(90deg, var(--accent-neon), var(--accent-gold));
            color: #0a1628;
            padding: 10px 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 16px;
            font-size: 13px;
            font-weight: 600;
            z-index: 1001;
        }

        .demo-badge {
            background: rgba(0,0,0,0.2);
            padding: 3px 10px;
            border-radius: 20px;
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .demo-controls {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-left: auto;
        }

        .demo-btn {
            display: flex;
            align-items: center;
            gap: 6px;
            background: rgba(0,0,0,0.2);
            padding: 4px 12px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 12px;
            border: none;
            color: inherit;
            font-family: inherit;
            font-weight: 600;
            transition: background 0.2s;
        }

        .demo-btn:hover {
            background: rgba(0,0,0,0.3);
        }

        /* Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 24px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border);
        }

        .header-left { flex: 1; }

        .badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            background: var(--accent-neon-dim);
            color: var(--accent-neon);
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            padding: 6px 12px;
            border-radius: 20px;
            margin-bottom: 12px;
        }

        .badge::before {
            content: '';
            width: 6px;
            height: 6px;
            background: var(--accent-neon);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.4; }
        }

        .event-title {
            font-family: 'Fraunces', serif;
            font-size: 26px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .event-meta {
            display: flex;
            gap: 20px;
            color: var(--text-secondary);
            font-size: 13px;
            flex-wrap: wrap;
        }

        .event-meta span {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .event-meta svg {
            width: 14px;
            height: 14px;
            opacity: 0.7;
        }

        .header-right {
            text-align: right;
        }

        .logo {
            font-weight: 700;
            font-size: 14px;
            color: var(--text-muted);
            margin-bottom: 4px;
            letter-spacing: 0.05em;
        }

        .live-indicator {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 11px;
            color: var(--accent-neon);
        }

        .live-dot {
            width: 8px;
            height: 8px;
            background: var(--accent-neon);
            border-radius: 50%;
            animation: livePulse 2s infinite;
        }

        @keyframes livePulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(0, 229, 204, 0.4); }
            50% { box-shadow: 0 0 0 8px rgba(0, 229, 204, 0); }
        }

        /* Hero Stats */
        .hero-stats {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 12px;
            margin-bottom: 20px;
        }

        .hero-stat {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 16px;
            position: relative;
            overflow: hidden;
            border: 1px solid var(--border);
            cursor: pointer;
            transition: all 0.2s;
        }

        .hero-stat:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(0,0,0,0.3);
            border-color: var(--accent-neon);
        }

        .hero-stat.featured {
            background: linear-gradient(135deg, var(--bg-card) 0%, rgba(0, 229, 204, 0.1) 100%);
            border-color: rgba(0, 229, 204, 0.3);
        }

        .hero-stat.featured::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--accent-neon), var(--accent-gold));
        }

        .stat-label {
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: var(--text-muted);
            margin-bottom: 4px;
        }

        .stat-value {
            font-family: 'Fraunces', serif;
            font-size: 26px;
            font-weight: 700;
            color: var(--text-primary);
            line-height: 1;
        }

        .stat-value.money { color: var(--accent-neon); }

        .stat-sub {
            font-size: 10px;
            color: var(--text-secondary);
            margin-top: 4px;
        }

        .stat-hover-hint {
            position: absolute;
            bottom: 6px;
            right: 8px;
            font-size: 9px;
            color: var(--accent-neon);
            opacity: 0;
            transition: opacity 0.2s;
        }

        .hero-stat:hover .stat-hover-hint {
            opacity: 1;
        }

        /* Active Filters Bar */
        .filters-bar {
            background: var(--bg-card);
            border-radius: 10px;
            padding: 12px 16px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            border: 1px solid var(--border);
        }

        .filters-label {
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-muted);
            flex-shrink: 0;
        }

        .active-filters {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            flex: 1;
            min-height: 24px;
            align-items: center;
        }

        .no-filters {
            color: var(--text-muted);
            font-size: 11px;
            font-style: italic;
        }

        .filter-tag {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            background: var(--accent-neon-dim);
            color: var(--accent-neon);
            font-size: 11px;
            font-weight: 600;
            padding: 4px 10px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.2s;
            animation: tagIn 0.3s ease;
        }

        @keyframes tagIn {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .filter-tag:hover {
            background: var(--accent-red);
            color: white;
        }

        .filter-tag .remove {
            font-size: 12px;
            font-weight: bold;
        }

        .filter-results {
            font-size: 12px;
            color: var(--text-secondary);
            margin-left: auto;
        }

        .filter-results strong {
            color: var(--accent-neon);
        }

        .clear-filters {
            font-size: 11px;
            color: var(--accent-neon);
            cursor: pointer;
            background: var(--accent-neon-dim);
            padding: 4px 10px;
            border-radius: 20px;
            transition: all 0.2s;
        }

        .clear-filters:hover {
            background: var(--accent-neon);
            color: var(--bg-primary);
        }

        /* Two Column Layout */
        .two-col {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        /* Scoring Panel - Compact */
        .scoring-panel {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 16px;
        }

        .scoring-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .scoring-title {
            font-weight: 600;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-secondary);
        }

        .scoring-reset {
            font-size: 10px;
            color: var(--accent-neon);
            cursor: pointer;
            background: none;
            border: none;
            font-family: inherit;
            text-decoration: underline;
        }

        .sliders-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }

        .slider-item {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .slider-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .slider-name {
            font-size: 11px;
            font-weight: 500;
            color: var(--text-primary);
        }

        .slider-value {
            font-size: 11px;
            font-weight: 700;
            color: var(--accent-neon);
            min-width: 32px;
            text-align: right;
        }

        .slider-input {
            -webkit-appearance: none;
            appearance: none;
            width: 100%;
            height: 6px;
            background: var(--bg-card-alt);
            border-radius: 3px;
            outline: none;
            cursor: pointer;
        }

        .slider-input::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 16px;
            height: 16px;
            background: var(--accent-neon);
            border-radius: 50%;
            cursor: grab;
            box-shadow: 0 2px 8px rgba(0, 229, 204, 0.4);
            transition: transform 0.2s;
        }

        .slider-input::-webkit-slider-thumb:hover {
            transform: scale(1.2);
        }

        .slider-input::-moz-range-thumb {
            width: 16px;
            height: 16px;
            background: var(--accent-neon);
            border-radius: 50%;
            cursor: grab;
            border: none;
        }

        /* Opportunity Tiers - Compact */
        .opportunity-panel {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 16px;
        }

        .opportunity-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .opportunity-title {
            font-weight: 600;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-secondary);
        }

        .opportunity-mini-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }

        .opp-mini-card {
            background: var(--bg-card-alt);
            border-radius: 10px;
            padding: 12px;
            cursor: pointer;
            transition: all 0.2s;
            border: 2px solid transparent;
        }

        .opp-mini-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }

        .opp-mini-card.tier1 { border-color: var(--tier1); }
        .opp-mini-card.tier2 { border-color: var(--tier2); }
        .opp-mini-card.tier3 { border-color: var(--tier3); }

        .opp-mini-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .opp-mini-badge {
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 11px;
            font-weight: 600;
        }

        .opp-mini-card.tier1 .opp-mini-badge { color: var(--tier1); }
        .opp-mini-card.tier2 .opp-mini-badge { color: var(--tier2); }
        .opp-mini-card.tier3 .opp-mini-badge { color: var(--tier3); }

        .opp-mini-count {
            font-family: 'Fraunces', serif;
            font-size: 20px;
            font-weight: 700;
        }

        .opp-mini-person {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 6px 8px;
            background: var(--bg-card);
            border-radius: 6px;
            margin-bottom: 4px;
            font-size: 11px;
        }

        .opp-mini-person:last-child {
            margin-bottom: 0;
        }

        .opp-person-name {
            font-weight: 600;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 100px;
        }

        .opp-person-score {
            color: var(--text-muted);
            font-size: 10px;
        }

        .opp-view-all {
            text-align: center;
            color: var(--accent-neon);
            font-size: 10px;
            margin-top: 8px;
            cursor: pointer;
        }

        .opp-view-all:hover {
            text-decoration: underline;
        }

        /* Segment Cards - Main Interactive Area */
        .segments-section {
            margin-bottom: 20px;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .section-title {
            font-weight: 600;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-secondary);
        }

        .section-hint {
            font-size: 11px;
            color: var(--text-muted);
        }

        .segments-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
        }

        .segment-card {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 16px;
            border: 1px solid var(--border);
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
            overflow: hidden;
        }

        .segment-card:hover {
            border-color: var(--accent-neon);
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(0, 229, 204, 0.15);
        }

        .segment-card.active {
            border-color: var(--accent-neon);
            background: linear-gradient(135deg, var(--bg-card) 0%, rgba(0, 229, 204, 0.1) 100%);
        }

        .segment-card::after {
            content: 'Click to filter';
            position: absolute;
            bottom: 8px;
            right: 10px;
            font-size: 9px;
            color: var(--accent-neon);
            opacity: 0;
            transition: opacity 0.2s;
        }

        .segment-card:hover::after {
            opacity: 1;
        }

        .segment-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 12px;
        }

        .segment-title {
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-muted);
        }

        .segment-icon {
            width: 24px;
            height: 24px;
            background: var(--bg-card-alt);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }

        .segment-items {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .segment-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 10px;
            background: var(--bg-card-alt);
            border-radius: 6px;
            transition: all 0.2s;
            cursor: pointer;
        }

        .segment-item:hover {
            background: var(--accent-neon-dim);
            padding-left: 14px;
        }

        .segment-item.active {
            background: var(--accent-neon-dim);
            border-left: 3px solid var(--accent-neon);
        }

        .segment-item-label {
            font-size: 12px;
            font-weight: 500;
        }

        .segment-item-count {
            font-size: 12px;
            font-weight: 700;
            color: var(--accent-neon);
            background: var(--bg-card);
            padding: 2px 8px;
            border-radius: 10px;
        }

        /* Conversation Starters */
        .starters-card {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 16px;
            border: 1px solid var(--border);
            margin-bottom: 20px;
        }

        .starters-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .starters-title {
            font-weight: 600;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-secondary);
        }

        .starters-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        .starter-item {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            padding: 12px;
            background: var(--bg-card-alt);
            border-radius: 10px;
            border-left: 3px solid var(--accent-neon);
            cursor: pointer;
            transition: all 0.2s;
        }

        .starter-item:hover {
            background: var(--accent-neon-dim);
        }

        .starter-item.high-value {
            border-left-color: var(--accent-gold);
        }

        .starter-rank {
            width: 22px;
            height: 22px;
            background: var(--accent-neon-dim);
            color: var(--accent-neon);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 10px;
            flex-shrink: 0;
        }

        .starter-item.high-value .starter-rank {
            background: var(--accent-gold-dim);
            color: var(--accent-gold);
        }

        .starter-text {
            font-size: 12px;
            color: var(--text-secondary);
            line-height: 1.4;
        }

        .starter-text strong {
            color: var(--text-primary);
        }

        /* Quick Stats Row */
        .quick-stats {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .quick-stat {
            background: var(--bg-card);
            border-radius: 10px;
            padding: 14px;
            text-align: center;
            border: 1px solid var(--border);
            cursor: pointer;
            transition: all 0.2s;
        }

        .quick-stat:hover {
            border-color: var(--accent-neon);
            transform: translateY(-2px);
        }

        .quick-stat-icon {
            font-size: 18px;
            margin-bottom: 6px;
        }

        .quick-stat-value {
            font-family: 'Fraunces', serif;
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 2px;
        }

        .quick-stat-label {
            font-size: 9px;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        /* Footer */
        .footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 16px;
            border-top: 1px solid var(--border);
            color: var(--text-muted);
            font-size: 11px;
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.85);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 20px;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal {
            background: var(--bg-modal);
            border-radius: 16px;
            width: 100%;
            max-width: 800px;
            max-height: 85vh;
            overflow: hidden;
            border: 1px solid var(--border);
            box-shadow: 0 24px 64px rgba(0, 0, 0, 0.5);
            animation: modalIn 0.3s ease;
        }

        @keyframes modalIn {
            from { transform: scale(0.95); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 20px;
            border-bottom: 1px solid var(--border);
            background: var(--bg-card);
        }

        .modal-title-area {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .modal-icon {
            width: 40px;
            height: 40px;
            background: var(--accent-neon-dim);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }

        .modal-title {
            font-family: 'Fraunces', serif;
            font-size: 18px;
            font-weight: 700;
        }

        .modal-subtitle {
            font-size: 11px;
            color: var(--text-muted);
        }

        .modal-close {
            width: 32px;
            height: 32px;
            background: var(--bg-card-alt);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            border: none;
            color: var(--text-secondary);
            font-size: 18px;
            transition: all 0.2s;
        }

        .modal-close:hover {
            background: var(--accent-red);
            color: white;
            transform: rotate(90deg);
        }

        .modal-body {
            padding: 20px;
            max-height: 60vh;
            overflow-y: auto;
        }

        .modal-table {
            width: 100%;
            border-collapse: collapse;
        }

        .modal-table th {
            text-align: left;
            padding: 10px 12px;
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-muted);
            border-bottom: 1px solid var(--border);
            background: var(--bg-card);
            position: sticky;
            top: 0;
        }

        .modal-table td {
            padding: 12px;
            font-size: 13px;
            border-bottom: 1px solid var(--border);
        }

        .modal-table tr {
            cursor: pointer;
            transition: background 0.2s;
        }

        .modal-table tr:hover td {
            background: var(--bg-card);
        }

        .table-name {
            font-weight: 600;
        }

        .table-badge {
            display: inline-block;
            padding: 3px 8px;
            background: var(--accent-neon-dim);
            color: var(--accent-neon);
            border-radius: 10px;
            font-size: 10px;
            font-weight: 600;
        }

        .table-badge.gold {
            background: var(--accent-gold-dim);
            color: var(--accent-gold);
        }

        .table-badge.blue {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
        }

        /* Person Detail in Modal */
        .person-detail {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .person-section {
            background: var(--bg-card-alt);
            border-radius: 10px;
            padding: 16px;
        }

        .person-section-title {
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-muted);
            margin-bottom: 12px;
        }

        .person-field {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid var(--border);
        }

        .person-field:last-child {
            border-bottom: none;
        }

        .person-field-label {
            font-size: 12px;
            color: var(--text-muted);
        }

        .person-field-value {
            font-size: 12px;
            font-weight: 600;
        }

        /* Venn Diagram Preview */
        .venn-preview {
            background: var(--bg-card-alt);
            border-radius: 10px;
            padding: 16px;
            margin-bottom: 16px;
            text-align: center;
        }

        .venn-title {
            font-size: 12px;
            color: var(--text-muted);
            margin-bottom: 8px;
        }

        .venn-result {
            font-family: 'Fraunces', serif;
            font-size: 32px;
            font-weight: 700;
            color: var(--accent-neon);
        }

        .venn-desc {
            font-size: 11px;
            color: var(--text-secondary);
            margin-top: 4px;
        }

        /* Print styles */
        @media print {
            .demo-banner, .modal-overlay { display: none !important; }
            body { padding-top: 20px; background: white !important; color: #1a1a1a !important; }
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .hero-stats { grid-template-columns: repeat(3, 1fr); }
            .segments-grid { grid-template-columns: repeat(2, 1fr); }
            .quick-stats { grid-template-columns: repeat(3, 1fr); }
            .starters-grid { grid-template-columns: 1fr; }
        }

        @media (max-width: 768px) {
            body { padding: 16px; padding-top: 90px; }
            .two-col { grid-template-columns: 1fr; }
            .hero-stats { grid-template-columns: repeat(2, 1fr); }
            .segments-grid { grid-template-columns: 1fr; }
            .opportunity-mini-grid { grid-template-columns: 1fr; }
            .sliders-grid { grid-template-columns: 1fr; }
            .quick-stats { grid-template-columns: repeat(2, 1fr); }
        }
    </style>
</head>
<body>
    <!-- Demo Banner -->
    <div class="demo-banner">
        <span class="demo-badge">Demo Mode</span>
        <span>Pre-Event Registrant Summary ‚Äî Click anything to explore!</span>
        <div class="demo-controls">
            <button class="demo-btn" onclick="toggleTheme()">
                <span id="theme-icon">üåô</span>
                <span id="theme-text">Dark</span>
            </button>
            <button class="demo-btn" onclick="window.print()">
                üñ®Ô∏è Export
            </button>
        </div>
    </div>

    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-left">
                <div class="badge">Pre-Event Summary</div>
                <h1 class="event-title">Retirement Planning Workshop</h1>
                <div class="event-meta">
                    <span>üìÖ January 28th, 2026 ‚Ä¢ 6:00 PM</span>
                    <span>üìç Panache Woodfire Grill, Philadelphia PA</span>
                    <span>üè¢ Preservation Wealth Management</span>
                </div>
            </div>
            <div class="header-right">
                <div class="logo">ACQUIREUP</div>
                <div class="live-indicator">
                    <span class="live-dot"></span>
                    <span id="live-time">Updated just now</span>
                </div>
            </div>
        </header>

        <!-- Hero Stats -->
        <div class="hero-stats">
            <div class="hero-stat" onclick="openModal('All Registrants', '47 total registrants for this event', 'all')">
                <div class="stat-label">Total Registrants</div>
                <div class="stat-value" data-count="47">0</div>
                <div class="stat-sub">24 households</div>
                <div class="stat-hover-hint">Click to view all ‚Üí</div>
            </div>
            <div class="hero-stat featured" onclick="openModal('Est. Assets in Room', 'Based on 33 matched records', 'assets')">
                <div class="stat-label">Est. Assets in Room</div>
                <div class="stat-value money" data-count="19400000" data-prefix="$" data-format="currency">$0</div>
                <div class="stat-sub">Avg $588K per matched</div>
                <div class="stat-hover-hint">Click for breakdown ‚Üí</div>
            </div>
            <div class="hero-stat" onclick="openModal('Match Score Distribution', 'Perfect Match scoring from Prospectix', 'scores')">
                <div class="stat-label">Avg Match Score</div>
                <div class="stat-value" data-count="7.4" data-decimals="1">0</div>
                <div class="stat-sub">14 scored 8+</div>
                <div class="stat-hover-hint">Click for details ‚Üí</div>
            </div>
            <div class="hero-stat" onclick="openModal('Drive Time Analysis', 'Distance from venue', 'drive')">
                <div class="stat-label">Avg Drive Time</div>
                <div class="stat-value"><span data-count="18">0</span><span style="font-size: 14px; font-weight: 400;"> min</span></div>
                <div class="stat-sub">Within 15 mi radius</div>
                <div class="stat-hover-hint">Click for map data ‚Üí</div>
            </div>
            <div class="hero-stat" onclick="openModal('Top Targets', '5 high-priority prospects identified', 'tier1')">
                <div class="stat-label">Top Targets</div>
                <div class="stat-value" style="color: var(--accent-gold);" data-count="5">0</div>
                <div class="stat-sub">‚òÖ Priority prospects</div>
                <div class="stat-hover-hint">Click to see who ‚Üí</div>
            </div>
        </div>

        <!-- Active Filters Bar -->
        <div class="filters-bar">
            <span class="filters-label">üîç Active Filters:</span>
            <div class="active-filters" id="active-filters">
                <span class="no-filters">Click any segment below to filter ‚Äî combine filters to find overlaps!</span>
            </div>
            <div class="filter-results" id="filter-results"></div>
            <span class="clear-filters" id="clear-btn" style="display: none;" onclick="clearFilters()">Clear All</span>
        </div>

        <!-- Data Coverage Note -->
        <div style="background: var(--accent-gold-dim); border: 1px solid rgba(201, 162, 39, 0.3); border-radius: 8px; padding: 10px 16px; margin-bottom: 20px; font-size: 12px; display: flex; align-items: center; gap: 10px;">
            <span>‚ö†Ô∏è</span>
            <span>Data coverage: <strong style="color: var(--accent-gold);">33 of 47 registrants (70%)</strong> matched with Prospectix records. Asset & demographic data shown for matched records only.</span>
        </div>

        <!-- Two Column: Scoring + Opportunity Tiers -->
        <div class="two-col">
            <!-- Scoring Panel -->
            <div class="scoring-panel">
                <div class="scoring-header">
                    <span class="scoring-title">‚öôÔ∏è Customize Prospect Scoring</span>
                    <button class="scoring-reset" onclick="resetSliders()">Reset</button>
                </div>
                <div class="sliders-grid">
                    <div class="slider-item">
                        <div class="slider-label">
                            <span class="slider-name">üí∞ Net Worth</span>
                            <span class="slider-value" id="worth-value">40%</span>
                        </div>
                        <input type="range" class="slider-input" id="worth-slider" min="0" max="100" value="40" oninput="updateScoring()">
                    </div>
                    <div class="slider-item">
                        <div class="slider-label">
                            <span class="slider-name">üéÇ Age</span>
                            <span class="slider-value" id="age-value">30%</span>
                        </div>
                        <input type="range" class="slider-input" id="age-slider" min="0" max="100" value="30" oninput="updateScoring()">
                    </div>
                    <div class="slider-item">
                        <div class="slider-label">
                            <span class="slider-name">üíº Title</span>
                            <span class="slider-value" id="title-value">20%</span>
                        </div>
                        <input type="range" class="slider-input" id="title-slider" min="0" max="100" value="20" oninput="updateScoring()">
                    </div>
                    <div class="slider-item">
                        <div class="slider-label">
                            <span class="slider-name">‚≠ê Match</span>
                            <span class="slider-value" id="match-value">10%</span>
                        </div>
                        <input type="range" class="slider-input" id="match-slider" min="0" max="100" value="10" oninput="updateScoring()">
                    </div>
                </div>
            </div>

            <!-- Opportunity Tiers -->
            <div class="opportunity-panel">
                <div class="opportunity-header">
                    <span class="opportunity-title">üìä Opportunity Distribution</span>
                </div>
                <div class="opportunity-mini-grid" id="opportunity-grid">
                    <!-- Populated by JS -->
                </div>
            </div>
        </div>

        <!-- Main Segments Grid -->
        <div class="segments-section">
            <div class="section-header">
                <span class="section-title">üìã Registrant Segments</span>
                <span class="section-hint">Click any segment to filter ‚Ä¢ Combine for Venn diagram overlaps</span>
            </div>
            <div class="segments-grid">
                <!-- Asset Tiers -->
                <div class="segment-card" id="segment-worth">
                    <div class="segment-header">
                        <span class="segment-title">Est. Worth</span>
                        <span class="segment-icon">üí∞</span>
                    </div>
                    <div class="segment-items">
                        <div class="segment-item" onclick="toggleFilter('$1M+', 'worth', this)">
                            <span class="segment-item-label">$1M+</span>
                            <span class="segment-item-count">6</span>
                        </div>
                        <div class="segment-item" onclick="toggleFilter('$500K-$1M', 'worth', this)">
                            <span class="segment-item-label">$500K ‚Äì $1M</span>
                            <span class="segment-item-count">9</span>
                        </div>
                        <div class="segment-item" onclick="toggleFilter('$250K-$500K', 'worth', this)">
                            <span class="segment-item-label">$250K ‚Äì $500K</span>
                            <span class="segment-item-count">11</span>
                        </div>
                        <div class="segment-item" onclick="toggleFilter('Under $250K', 'worth', this)">
                            <span class="segment-item-label">Under $250K</span>
                            <span class="segment-item-count">7</span>
                        </div>
                    </div>
                </div>

                <!-- Age Distribution -->
                <div class="segment-card" id="segment-age">
                    <div class="segment-header">
                        <span class="segment-title">Age Range</span>
                        <span class="segment-icon">üéÇ</span>
                    </div>
                    <div class="segment-items">
                        <div class="segment-item" onclick="toggleFilter('60+', 'age', this)">
                            <span class="segment-item-label">60+ years</span>
                            <span class="segment-item-count">18</span>
                        </div>
                        <div class="segment-item" onclick="toggleFilter('50-59', 'age', this)">
                            <span class="segment-item-label">50-59 years</span>
                            <span class="segment-item-count">16</span>
                        </div>
                        <div class="segment-item" onclick="toggleFilter('40-49', 'age', this)">
                            <span class="segment-item-label">40-49 years</span>
                            <span class="segment-item-count">9</span>
                        </div>
                        <div class="segment-item" onclick="toggleFilter('Under 40', 'age', this)">
                            <span class="segment-item-label">Under 40</span>
                            <span class="segment-item-count">4</span>
                        </div>
                    </div>
                </div>

                <!-- Industry -->
                <div class="segment-card" id="segment-industry">
                    <div class="segment-header">
                        <span class="segment-title">Industry</span>
                        <span class="segment-icon">üè¢</span>
                    </div>
                    <div class="segment-items">
                        <div class="segment-item" onclick="toggleFilter('Healthcare', 'industry', this)">
                            <span class="segment-item-label">Healthcare</span>
                            <span class="segment-item-count">11</span>
                        </div>
                        <div class="segment-item" onclick="toggleFilter('Real Estate', 'industry', this)">
                            <span class="segment-item-label">Real Estate</span>
                            <span class="segment-item-count">8</span>
                        </div>
                        <div class="segment-item" onclick="toggleFilter('Business Owner', 'industry', this)">
                            <span class="segment-item-label">Business Owner</span>
                            <span class="segment-item-count">6</span>
                        </div>
                        <div class="segment-item" onclick="toggleFilter('Legal', 'industry', this)">
                            <span class="segment-item-label">Legal</span>
                            <span class="segment-item-count">5</span>
                        </div>
                    </div>
                </div>

                <!-- Job Titles -->
                <div class="segment-card" id="segment-title">
                    <div class="segment-header">
                        <span class="segment-title">Job Titles</span>
                        <span class="segment-icon">üíº</span>
                    </div>
                    <div class="segment-items">
                        <div class="segment-item" onclick="toggleFilter('CFO/Controller', 'title', this)">
                            <span class="segment-item-label">CFO / Controller</span>
                            <span class="segment-item-count">5</span>
                        </div>
                        <div class="segment-item" onclick="toggleFilter('Physician', 'title', this)">
                            <span class="segment-item-label">Physician</span>
                            <span class="segment-item-count">6</span>
                        </div>
                        <div class="segment-item" onclick="toggleFilter('Business Owner', 'title', this)">
                            <span class="segment-item-label">Business Owner</span>
                            <span class="segment-item-count">6</span>
                        </div>
                        <div class="segment-item" onclick="toggleFilter('Attorney', 'title', this)">
                            <span class="segment-item-label">Attorney</span>
                            <span class="segment-item-count">5</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Conversation Starters -->
        <div class="starters-card">
            <div class="starters-header">
                <span class="starters-title">üí¨ Conversation Starters (Ranked by Value)</span>
            </div>
            <div class="starters-grid">
                <div class="starter-item high-value" onclick="openModal('60+ with $500K+ Assets', '5 high-value targets identified', 'starter1')">
                    <div class="starter-rank">1</div>
                    <div class="starter-text"><strong>5 Targets are 60+ with $500K+</strong> ‚Äî Lead with Social Security optimization and RMD strategies.</div>
                </div>
                <div class="starter-item high-value" onclick="openModal('Business Owners', '6 business owners attending', 'starter2')">
                    <div class="starter-rank">2</div>
                    <div class="starter-text"><strong>6 business owners attending</strong> ‚Äî Discuss succession planning and tax-advantaged exits.</div>
                </div>
                <div class="starter-item" onclick="openModal('Healthcare Professionals', '11 healthcare workers attending', 'starter3')">
                    <div class="starter-rank">3</div>
                    <div class="starter-text"><strong>11 healthcare professionals</strong> ‚Äî Use medical-specific retirement scenarios.</div>
                </div>
                <div class="starter-item" onclick="openModal('Attorneys', '5 attorneys attending', 'starter4')">
                    <div class="starter-rank">4</div>
                    <div class="starter-text"><strong>5 attorneys in attendance</strong> ‚Äî Discuss estate planning coordination.</div>
                </div>
            </div>
        </div>

        <!-- Quick Stats -->
        <div class="quick-stats">
            <div class="quick-stat" onclick="openModal('Email Opt-ins', '39 of 47 opted in', 'email')">
                <div class="quick-stat-icon">üìß</div>
                <div class="quick-stat-value">83%</div>
                <div class="quick-stat-label">Email Opt-in</div>
            </div>
            <div class="quick-stat" onclick="openModal('Average Age', 'Age distribution', 'avgage')">
                <div class="quick-stat-icon">üéÇ</div>
                <div class="quick-stat-value">57</div>
                <div class="quick-stat-label">Avg Age</div>
            </div>
            <div class="quick-stat" onclick="openModal('C-Suite Executives', '8 executives attending', 'csuite')">
                <div class="quick-stat-icon">üëî</div>
                <div class="quick-stat-value">8</div>
                <div class="quick-stat-label">C-Suite</div>
            </div>
            <div class="quick-stat" onclick="openModal('Homeowners', '31 of 33 matched are property owners', 'homeowners')">
                <div class="quick-stat-icon">üè†</div>
                <div class="quick-stat-value">31</div>
                <div class="quick-stat-label">Homeowners</div>
            </div>
            <div class="quick-stat" onclick="openModal('Married', '28 of 33 matched are married', 'married')">
                <div class="quick-stat-icon">üíç</div>
                <div class="quick-stat-value">28</div>
                <div class="quick-stat-label">Married</div>
            </div>
            <div class="quick-stat" onclick="openModal('Data Match Rate', '33 of 47 matched', 'matchrate')">
                <div class="quick-stat-icon">üìä</div>
                <div class="quick-stat-value">70%</div>
                <div class="quick-stat-label">Match Rate</div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="footer">
            <div>Data: LeadJig + Prospectix + DataAxel ‚Ä¢ Sample data for demonstration</div>
            <div>Report ID: PWM-2026-0128-PRE-V2</div>
        </footer>
    </div>

    <!-- Modal -->
    <div class="modal-overlay" id="modal" onclick="if(event.target === this) closeModal()">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-title-area">
                    <div class="modal-icon" id="modal-icon">üìä</div>
                    <div>
                        <div class="modal-title" id="modal-title">Drill-Down</div>
                        <div class="modal-subtitle" id="modal-subtitle">Details</div>
                    </div>
                </div>
                <button class="modal-close" onclick="closeModal()">√ó</button>
            </div>
            <div class="modal-body" id="modal-body">
                <!-- Dynamic content -->
            </div>
        </div>
    </div>

    <script>
        // ===== SAMPLE DATA (33 matched registrants) =====
        const prospects = [
            // $1M+ (6 people)
            { id: 1, name: 'Patricia Hoffman', age: 62, title: 'Attorney', company: 'Hoffman & Associates', worth: '$1M+', worthValue: 4, matchScore: 9, industry: 'Legal', married: true, children: 2, homeowner: true, email: true },
            { id: 2, name: 'Robert Chen', age: 64, title: 'Physician', company: 'Penn Medicine', worth: '$1M+', worthValue: 4, matchScore: 9, industry: 'Healthcare', married: true, children: 1, homeowner: true, email: true },
            { id: 3, name: 'Margaret Liu', age: 61, title: 'Physician', company: 'Jefferson Health', worth: '$1M+', worthValue: 4, matchScore: 8, industry: 'Healthcare', married: true, children: 2, homeowner: true, email: false },
            { id: 4, name: 'Richard Moore', age: 66, title: 'CEO', company: 'Moore Consulting', worth: '$1M+', worthValue: 4, matchScore: 8, industry: 'Consulting', married: true, children: 0, homeowner: true, email: true },
            { id: 5, name: 'Michael Brown', age: 68, title: 'Retired CFO', company: 'Retired', worth: '$1M+', worthValue: 4, matchScore: 9, industry: 'Retired', married: true, children: 3, homeowner: true, email: true },
            { id: 6, name: 'Emily White', age: 63, title: 'Physician', company: 'CHOP', worth: '$1M+', worthValue: 4, matchScore: 8, industry: 'Healthcare', married: true, children: 2, homeowner: true, email: true },
            
            // $500K-$1M (9 people)
            { id: 7, name: 'Mark Brock', age: 64, title: 'CFO', company: 'Continental Materials', worth: '$500K-$1M', worthValue: 3, matchScore: 10, industry: 'Manufacturing', married: true, children: 3, homeowner: true, email: true },
            { id: 8, name: 'William Torres', age: 67, title: 'Business Owner', company: 'Torres Construction', worth: '$500K-$1M', worthValue: 3, matchScore: 8, industry: 'Construction', married: true, children: 2, homeowner: true, email: true },
            { id: 9, name: 'Karen Mitchell', age: 55, title: 'Director', company: 'Vanguard', worth: '$500K-$1M', worthValue: 3, matchScore: 7, industry: 'Finance', married: true, children: 2, homeowner: true, email: true },
            { id: 10, name: 'Sarah Johnson', age: 59, title: 'Attorney', company: 'Johnson Law', worth: '$500K-$1M', worthValue: 3, matchScore: 8, industry: 'Legal', married: true, children: 2, homeowner: true, email: true },
            { id: 11, name: 'Daniel Lee', age: 54, title: 'Controller', company: 'Aramark', worth: '$500K-$1M', worthValue: 3, matchScore: 7, industry: 'Food Service', married: true, children: 1, homeowner: true, email: true },
            { id: 12, name: 'Thomas Garcia', age: 57, title: 'Business Owner', company: 'Garcia Plumbing', worth: '$500K-$1M', worthValue: 3, matchScore: 6, industry: 'Construction', married: true, children: 4, homeowner: true, email: false },
            { id: 13, name: 'Barbara Martinez', age: 60, title: 'Physician', company: 'Main Line Health', worth: '$500K-$1M', worthValue: 3, matchScore: 7, industry: 'Healthcare', married: false, children: 1, homeowner: true, email: true },
            { id: 14, name: 'Steven Clark', age: 58, title: 'Attorney', company: 'Clark Legal Group', worth: '$500K-$1M', worthValue: 3, matchScore: 6, industry: 'Legal', married: true, children: 2, homeowner: true, email: true },
            { id: 15, name: 'Linda Robinson', age: 52, title: 'CFO', company: 'Tech Solutions Inc', worth: '$500K-$1M', worthValue: 3, matchScore: 7, industry: 'Technology', married: true, children: 2, homeowner: true, email: true },
            
            // $250K-$500K (11 people)
            { id: 16, name: 'Azalia Graham', age: 52, title: 'Real Estate Agent', company: 'Exit Benchmark', worth: '$250K-$500K', worthValue: 2, matchScore: 10, industry: 'Real Estate', married: false, children: 1, homeowner: true, email: true },
            { id: 17, name: 'Jennifer Davis', age: 48, title: 'Real Estate Broker', company: 'Keller Williams', worth: '$250K-$500K', worthValue: 2, matchScore: 7, industry: 'Real Estate', married: true, children: 1, homeowner: true, email: true },
            { id: 18, name: 'Nancy Taylor', age: 56, title: 'Real Estate Agent', company: 'RE/MAX', worth: '$250K-$500K', worthValue: 2, matchScore: 6, industry: 'Real Estate', married: false, children: 2, homeowner: true, email: true },
            { id: 19, name: 'David Park', age: 47, title: 'IT Manager', company: 'Comcast', worth: '$250K-$500K', worthValue: 2, matchScore: 5, industry: 'Technology', married: true, children: 2, homeowner: true, email: true },
            { id: 20, name: 'Charles Wilson', age: 61, title: 'Business Owner', company: 'Wilson Auto', worth: '$250K-$500K', worthValue: 2, matchScore: 6, industry: 'Automotive', married: true, children: 3, homeowner: true, email: true },
            { id: 21, name: 'Susan Anderson', age: 54, title: 'Real Estate Agent', company: 'Coldwell Banker', worth: '$250K-$500K', worthValue: 2, matchScore: 5, industry: 'Real Estate', married: true, children: 2, homeowner: true, email: false },
            { id: 22, name: 'Joseph Thompson', age: 49, title: 'Controller', company: 'Regional Hospital', worth: '$250K-$500K', worthValue: 2, matchScore: 6, industry: 'Healthcare', married: true, children: 1, homeowner: true, email: true },
            { id: 23, name: 'Betty Harris', age: 63, title: 'Physician', company: 'Private Practice', worth: '$250K-$500K', worthValue: 2, matchScore: 7, industry: 'Healthcare', married: true, children: 0, homeowner: true, email: true },
            { id: 24, name: 'Kevin Lewis', age: 44, title: 'Real Estate Broker', company: 'Century 21', worth: '$250K-$500K', worthValue: 2, matchScore: 5, industry: 'Real Estate', married: true, children: 2, homeowner: true, email: true },
            { id: 25, name: 'Dorothy Walker', age: 58, title: 'Attorney', company: 'Walker & Associates', worth: '$250K-$500K', worthValue: 2, matchScore: 6, industry: 'Legal', married: false, children: 1, homeowner: true, email: true },
            { id: 26, name: 'Ronald Hall', age: 51, title: 'Business Owner', company: 'Hall Electric', worth: '$250K-$500K', worthValue: 2, matchScore: 5, industry: 'Electrical', married: true, children: 3, homeowner: true, email: true },
            
            // Under $250K (7 people)
            { id: 27, name: 'James Wilson', age: 45, title: 'Teacher', company: 'Phila Schools', worth: 'Under $250K', worthValue: 1, matchScore: 5, industry: 'Education', married: true, children: 3, homeowner: false, email: true },
            { id: 28, name: 'Lisa Anderson', age: 38, title: 'Nurse', company: 'Temple Hospital', worth: 'Under $250K', worthValue: 1, matchScore: 6, industry: 'Healthcare', married: false, children: 0, homeowner: false, email: true },
            { id: 29, name: 'Mark Stevens', age: 42, title: 'Sales Rep', company: 'Pharma Co', worth: 'Under $250K', worthValue: 1, matchScore: 4, industry: 'Pharmaceutical', married: true, children: 2, homeowner: true, email: true },
            { id: 30, name: 'Carol Young', age: 36, title: 'Nurse', company: 'Penn Medicine', worth: 'Under $250K', worthValue: 1, matchScore: 5, industry: 'Healthcare', married: true, children: 1, homeowner: false, email: true },
            { id: 31, name: 'Brian King', age: 41, title: 'Technician', company: 'PECO', worth: 'Under $250K', worthValue: 1, matchScore: 4, industry: 'Utilities', married: true, children: 2, homeowner: true, email: false },
            { id: 32, name: 'Michelle Scott', age: 33, title: 'Real Estate Agent', company: 'New Agent Realty', worth: 'Under $250K', worthValue: 1, matchScore: 3, industry: 'Real Estate', married: false, children: 0, homeowner: false, email: true },
            { id: 33, name: 'Anthony Green', age: 39, title: 'Business Owner', company: 'Green Landscaping', worth: 'Under $250K', worthValue: 1, matchScore: 5, industry: 'Landscaping', married: true, children: 2, homeowner: true, email: true }
        ];

        // Scoring weights
        let weights = { worth: 40, age: 30, title: 20, match: 10 };
        
        // Active filters
        let activeFilters = [];

        // ===== ANIMATED COUNTERS =====
        function animateCounters() {
            document.querySelectorAll('[data-count]').forEach(el => {
                const target = parseFloat(el.dataset.count);
                const decimals = parseInt(el.dataset.decimals) || 0;
                const prefix = el.dataset.prefix || '';
                const format = el.dataset.format;
                const duration = 1200;
                const start = performance.now();
                
                function update(currentTime) {
                    const elapsed = currentTime - start;
                    const progress = Math.min(elapsed / duration, 1);
                    const eased = 1 - Math.pow(1 - progress, 3);
                    const current = target * eased;
                    
                    if (format === 'currency') {
                        el.textContent = prefix + (current / 1000000).toFixed(1) + 'M';
                    } else {
                        el.textContent = prefix + current.toFixed(decimals);
                    }
                    
                    if (progress < 1) requestAnimationFrame(update);
                }
                requestAnimationFrame(update);
            });
        }

        // ===== THEME TOGGLE =====
        function toggleTheme() {
            const html = document.documentElement;
            const icon = document.getElementById('theme-icon');
            const text = document.getElementById('theme-text');
            
            if (html.dataset.theme === 'dark') {
                html.dataset.theme = 'light';
                icon.textContent = '‚òÄÔ∏è';
                text.textContent = 'Light';
            } else {
                html.dataset.theme = 'dark';
                icon.textContent = 'üåô';
                text.textContent = 'Dark';
            }
        }

        // ===== SCORING SYSTEM =====
        function calculateScore(prospect) {
            const total = weights.worth + weights.age + weights.title + weights.match;
            if (total === 0) return 0;
            
            const worthScore = prospect.worthValue * 25;
            const ageScore = prospect.age >= 60 ? 100 : prospect.age >= 55 ? 80 : prospect.age >= 50 ? 60 : 40;
            const titleScore = ['CEO', 'CFO', 'Business Owner', 'Physician', 'Attorney', 'Controller', 'Director'].some(t => prospect.title.includes(t)) ? 100 : 50;
            const matchScoreVal = prospect.matchScore * 10;
            
            return Math.round(
                (worthScore * weights.worth / total) +
                (ageScore * weights.age / total) +
                (titleScore * weights.title / total) +
                (matchScoreVal * weights.match / total)
            );
        }

        function updateScoring() {
            weights.worth = parseInt(document.getElementById('worth-slider').value);
            weights.age = parseInt(document.getElementById('age-slider').value);
            weights.title = parseInt(document.getElementById('title-slider').value);
            weights.match = parseInt(document.getElementById('match-slider').value);
            
            document.getElementById('worth-value').textContent = weights.worth + '%';
            document.getElementById('age-value').textContent = weights.age + '%';
            document.getElementById('title-value').textContent = weights.title + '%';
            document.getElementById('match-value').textContent = weights.match + '%';
            
            renderOpportunityTiers();
        }

        function resetSliders() {
            document.getElementById('worth-slider').value = 40;
            document.getElementById('age-slider').value = 30;
            document.getElementById('title-slider').value = 20;
            document.getElementById('match-slider').value = 10;
            updateScoring();
        }

        function renderOpportunityTiers() {
            const scored = prospects.map(p => ({ ...p, score: calculateScore(p) }))
                .sort((a, b) => b.score - a.score);
            
            const tier1 = scored.slice(0, 5);
            const tier2 = scored.slice(5, 17);
            const tier3 = scored.slice(17);
            
            const grid = document.getElementById('opportunity-grid');
            grid.innerHTML = `
                <div class="opp-mini-card tier1" onclick="openTierModal('Targets', 'tier1')">
                    <div class="opp-mini-header">
                        <div class="opp-mini-badge">‚≠ê Targets</div>
                        <div class="opp-mini-count">${tier1.length}</div>
                    </div>
                    ${tier1.slice(0, 2).map(p => `
                        <div class="opp-mini-person">
                            <span class="opp-person-name">${p.name.split(' ')[0]}</span>
                            <span class="opp-person-score">${p.score}</span>
                        </div>
                    `).join('')}
                    <div class="opp-view-all">View all ${tier1.length} ‚Üí</div>
                </div>
                <div class="opp-mini-card tier2" onclick="openTierModal('Prospects', 'tier2')">
                    <div class="opp-mini-header">
                        <div class="opp-mini-badge">‚óÜ Prospects</div>
                        <div class="opp-mini-count">${tier2.length}</div>
                    </div>
                    ${tier2.slice(0, 2).map(p => `
                        <div class="opp-mini-person">
                            <span class="opp-person-name">${p.name.split(' ')[0]}</span>
                            <span class="opp-person-score">${p.score}</span>
                        </div>
                    `).join('')}
                    <div class="opp-view-all">View all ${tier2.length} ‚Üí</div>
                </div>
                <div class="opp-mini-card tier3" onclick="openTierModal('Nurture', 'tier3')">
                    <div class="opp-mini-header">
                        <div class="opp-mini-badge">‚óã Nurture</div>
                        <div class="opp-mini-count">${tier3.length}</div>
                    </div>
                    ${tier3.slice(0, 2).map(p => `
                        <div class="opp-mini-person">
                            <span class="opp-person-name">${p.name.split(' ')[0]}</span>
                            <span class="opp-person-score">${p.score}</span>
                        </div>
                    `).join('')}
                    <div class="opp-view-all">View all ${tier3.length} ‚Üí</div>
                </div>
            `;
        }

        // ===== FILTERING SYSTEM =====
        function toggleFilter(label, type, element) {
            const existing = activeFilters.findIndex(f => f.label === label && f.type === type);
            
            if (existing >= 0) {
                activeFilters.splice(existing, 1);
                element.classList.remove('active');
            } else {
                activeFilters.push({ label, type });
                element.classList.add('active');
            }
            
            renderFilters();
            
            // If multiple filters, show Venn diagram modal
            if (activeFilters.length >= 2) {
                showVennResults();
            }
        }

        function removeFilter(label, type) {
            activeFilters = activeFilters.filter(f => !(f.label === label && f.type === type));
            document.querySelectorAll('.segment-item.active').forEach(el => {
                if (el.querySelector('.segment-item-label').textContent.includes(label)) {
                    el.classList.remove('active');
                }
            });
            renderFilters();
        }

        function clearFilters() {
            activeFilters = [];
            document.querySelectorAll('.segment-item.active').forEach(el => el.classList.remove('active'));
            renderFilters();
        }

        function renderFilters() {
            const container = document.getElementById('active-filters');
            const results = document.getElementById('filter-results');
            const clearBtn = document.getElementById('clear-btn');
            
            if (activeFilters.length === 0) {
                container.innerHTML = '<span class="no-filters">Click any segment below to filter ‚Äî combine filters to find overlaps!</span>';
                results.innerHTML = '';
                clearBtn.style.display = 'none';
            } else {
                container.innerHTML = activeFilters.map(f => `
                    <div class="filter-tag" onclick="removeFilter('${f.label}', '${f.type}')">
                        ${f.label} <span class="remove">√ó</span>
                    </div>
                `).join('');
                
                const filtered = getFilteredProspects();
                results.innerHTML = `Showing <strong>${filtered.length}</strong> registrants`;
                clearBtn.style.display = 'block';
            }
        }

        function getFilteredProspects() {
            if (activeFilters.length === 0) return prospects;
            
            return prospects.filter(p => {
                return activeFilters.every(f => {
                    if (f.type === 'worth') return p.worth === f.label || (f.label === '$1M+' && p.worthValue === 4) || (f.label === '$500K-$1M' && p.worthValue === 3) || (f.label === '$250K-$500K' && p.worthValue === 2) || (f.label === 'Under $250K' && p.worthValue === 1);
                    if (f.type === 'age') {
                        if (f.label === '60+') return p.age >= 60;
                        if (f.label === '50-59') return p.age >= 50 && p.age < 60;
                        if (f.label === '40-49') return p.age >= 40 && p.age < 50;
                        if (f.label === 'Under 40') return p.age < 40;
                    }
                    if (f.type === 'industry') return p.industry.toLowerCase().includes(f.label.toLowerCase());
                    if (f.type === 'title') return p.title.toLowerCase().includes(f.label.toLowerCase().replace('/', ''));
                    return true;
                });
            });
        }

        function showVennResults() {
            const filtered = getFilteredProspects();
            const filterDesc = activeFilters.map(f => f.label).join(' + ');
            
            openModal(`Cross-Filter: ${filterDesc}`, `${filtered.length} registrants match ALL criteria`, 'venn', filtered);
        }

        // ===== MODAL SYSTEM =====
        function openModal(title, subtitle, type, customData = null) {
            document.getElementById('modal-title').textContent = title;
            document.getElementById('modal-subtitle').textContent = subtitle;
            
            const icons = {
                all: 'üë•', assets: 'üí∞', scores: '‚≠ê', drive: 'üöó', tier1: '‚≠ê',
                tier2: '‚óÜ', tier3: '‚óã', venn: 'üîç', email: 'üìß', avgage: 'üéÇ',
                csuite: 'üëî', homeowners: 'üè†', married: 'üíç', matchrate: 'üìä',
                starter1: 'üí°', starter2: 'üí°', starter3: 'üí°', starter4: 'üí°'
            };
            document.getElementById('modal-icon').textContent = icons[type] || 'üìä';
            
            let data = customData || getDataForType(type);
            let bodyContent = '';
            
            if (type === 'venn' && activeFilters.length >= 2) {
                const filterDesc = activeFilters.map(f => f.label).join(' AND ');
                bodyContent = `
                    <div class="venn-preview">
                        <div class="venn-title">Registrants matching: ${filterDesc}</div>
                        <div class="venn-result">${data.length}</div>
                        <div class="venn-desc">This is your "Venn diagram" overlap!</div>
                    </div>
                `;
            }
            
            bodyContent += generateTable(data);
            document.getElementById('modal-body').innerHTML = bodyContent;
            document.getElementById('modal').classList.add('active');
        }

        function getDataForType(type) {
            const scored = prospects.map(p => ({ ...p, score: calculateScore(p) })).sort((a, b) => b.score - a.score);
            
            switch(type) {
                case 'all': return scored;
                case 'assets': return scored.filter(p => p.worthValue >= 3);
                case 'tier1': return scored.slice(0, 5);
                case 'tier2': return scored.slice(5, 17);
                case 'tier3': return scored.slice(17);
                case 'email': return scored.filter(p => p.email);
                case 'csuite': return scored.filter(p => ['CEO', 'CFO', 'Controller', 'Director'].some(t => p.title.includes(t)));
                case 'homeowners': return scored.filter(p => p.homeowner);
                case 'married': return scored.filter(p => p.married);
                case 'starter1': return scored.filter(p => p.age >= 60 && p.worthValue >= 3);
                case 'starter2': return scored.filter(p => p.title.includes('Business Owner') || p.title.includes('CEO'));
                case 'starter3': return scored.filter(p => p.industry === 'Healthcare');
                case 'starter4': return scored.filter(p => p.industry === 'Legal');
                default: return scored;
            }
        }

        function openTierModal(tierName, type) {
            const data = getDataForType(type);
            openModal(tierName, `${data.length} registrants in this tier`, type, data);
        }

        function openPersonModal(id) {
            const person = prospects.find(p => p.id === id);
            if (!person) return;
            
            document.getElementById('modal-title').textContent = person.name;
            document.getElementById('modal-subtitle').textContent = `${person.title} at ${person.company}`;
            document.getElementById('modal-icon').textContent = 'üë§';
            
            document.getElementById('modal-body').innerHTML = `
                <div class="person-detail">
                    <div class="person-section">
                        <div class="person-section-title">Demographics</div>
                        <div class="person-field"><span class="person-field-label">Age</span><span class="person-field-value">${person.age} years</span></div>
                        <div class="person-field"><span class="person-field-label">Married</span><span class="person-field-value">${person.married ? 'Yes' : 'No'}</span></div>
                        <div class="person-field"><span class="person-field-label">Children</span><span class="person-field-value">${person.children}</span></div>
                        <div class="person-field"><span class="person-field-label">Homeowner</span><span class="person-field-value">${person.homeowner ? 'Yes' : 'No'}</span></div>
                    </div>
                    <div class="person-section">
                        <div class="person-section-title">Financial Profile</div>
                        <div class="person-field"><span class="person-field-label">Est. Worth</span><span class="person-field-value">${person.worth}</span></div>
                        <div class="person-field"><span class="person-field-label">Match Score</span><span class="person-field-value">${person.matchScore}/10</span></div>
                        <div class="person-field"><span class="person-field-label">Industry</span><span class="person-field-value">${person.industry}</span></div>
                        <div class="person-field"><span class="person-field-label">Composite Score</span><span class="person-field-value" style="color: var(--accent-neon);">${calculateScore(person)}</span></div>
                    </div>
                </div>
            `;
            document.getElementById('modal').classList.add('active');
        }

        function generateTable(data) {
            if (!data || data.length === 0) return '<p style="color: var(--text-muted); text-align: center; padding: 20px;">No matching registrants</p>';
            
            return `
                <table class="modal-table">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Age</th>
                            <th>Title</th>
                            <th>Est. Worth</th>
                            <th>Score</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${data.map(p => `
                            <tr onclick="openPersonModal(${p.id})">
                                <td class="table-name">${p.name}</td>
                                <td>${p.age}</td>
                                <td>${p.title}</td>
                                <td><span class="table-badge ${p.worthValue >= 4 ? '' : p.worthValue >= 3 ? 'gold' : 'blue'}">${p.worth}</span></td>
                                <td>${p.score || calculateScore(p)}</td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
            `;
        }

        function closeModal() {
            document.getElementById('modal').classList.remove('active');
        }

        // Keyboard shortcut
        document.addEventListener('keydown', e => {
            if (e.key === 'Escape') closeModal();
        });

        // ===== INIT =====
        document.addEventListener('DOMContentLoaded', () => {
            animateCounters();
            renderOpportunityTiers();
        });
    </script>
</body>
</html>
